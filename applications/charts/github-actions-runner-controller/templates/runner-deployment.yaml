{{- range .Values.runners.repositories }}
---
apiVersion: actions.summerwind.dev/v1alpha1
kind: RunnerDeployment
metadata:
  name: repository-runner-{{ .repository | replace "/" "--" }}
spec:
  template:
    spec:
      replicas: {{ default $.Values.runnerConfig.replicas .replicas }}
      repository: {{ .repository }}
    {{- with .labels }}
      labels: {{ . | toYaml |  nindent 8 }}
    {{- end }}
{{- end }}

{{- range .Values.runners.organizations }}
---
apiVersion: actions.summerwind.dev/v1alpha1
kind: RunnerDeployment
metadata:
  name: organization-runner-{{ .organization | replace "/" "--" }}
spec:
  template:
    spec:
      replicas: {{ default $.Values.runnerConfig.replicas .replicas }}
      organization: {{ .organization }}
    {{- with .labels }}
      labels: {{ . | toYaml |  nindent 8 }}
    {{- end }}
{{- end }}
